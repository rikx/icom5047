--
-- PostgreSQL database dump
--

-- Dumped from database version 9.4.1
-- Dumped by pg_dump version 9.4.1
-- Started on 2015-04-13 10:19:53

SET statement_timeout = 0;
SET lock_timeout = 0;
SET client_encoding = 'SQL_ASCII';
SET standard_conforming_strings = on;
SET check_function_bodies = false;
SET client_min_messages = warning;

--
-- TOC entry 2192 (class 1262 OID 24943)
-- Name: SEA; Type: DATABASE; Schema: -; Owner: postgres
--

CREATE DATABASE "SEA" WITH TEMPLATE = template0 ENCODING = 'UTF8' LC_COLLATE = 'English_United States.1252' LC_CTYPE = 'English_United States.1252';


ALTER DATABASE "SEA" OWNER TO postgres;

\connect "SEA"

SET statement_timeout = 0;
SET lock_timeout = 0;
SET client_encoding = 'SQL_ASCII';
SET standard_conforming_strings = on;
SET check_function_bodies = false;
SET client_min_messages = warning;

--
-- TOC entry 199 (class 3079 OID 11855)
-- Name: plpgsql; Type: EXTENSION; Schema: -; Owner: 
--

CREATE EXTENSION IF NOT EXISTS plpgsql WITH SCHEMA pg_catalog;


--
-- TOC entry 2195 (class 0 OID 0)
-- Dependencies: 199
-- Name: EXTENSION plpgsql; Type: COMMENT; Schema: -; Owner: 
--

COMMENT ON EXTENSION plpgsql IS 'PL/pgSQL procedural language';


--
-- TOC entry 200 (class 3079 OID 24944)
-- Name: pgcrypto; Type: EXTENSION; Schema: -; Owner: 
--

CREATE EXTENSION IF NOT EXISTS pgcrypto WITH SCHEMA public;


--
-- TOC entry 2196 (class 0 OID 0)
-- Dependencies: 200
-- Name: EXTENSION pgcrypto; Type: COMMENT; Schema: -; Owner: 
--

COMMENT ON EXTENSION pgcrypto IS 'cryptographic functions';


SET search_path = public, pg_catalog;

SET default_tablespace = '';

SET default_with_oids = false;

--
-- TOC entry 172 (class 1259 OID 24979)
-- Name: address; Type: TABLE; Schema: public; Owner: postgres; Tablespace: 
--

CREATE TABLE address (
    address_id bigint NOT NULL,
    address_line1 character varying,
    city character varying,
    zipcode integer,
    address_line2 character varying
);


ALTER TABLE address OWNER TO postgres;

--
-- TOC entry 173 (class 1259 OID 24985)
-- Name: address_address_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE address_address_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE address_address_id_seq OWNER TO postgres;

--
-- TOC entry 2197 (class 0 OID 0)
-- Dependencies: 173
-- Name: address_address_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE address_address_id_seq OWNED BY address.address_id;


--
-- TOC entry 174 (class 1259 OID 24987)
-- Name: appointments; Type: TABLE; Schema: public; Owner: postgres; Tablespace: 
--

CREATE TABLE appointments (
    appointment_id bigint NOT NULL,
    date date,
    "time" time without time zone,
    location_id bigint NOT NULL,
    report_id bigint NOT NULL,
    purpose text
);


ALTER TABLE appointments OWNER TO postgres;

--
-- TOC entry 175 (class 1259 OID 24993)
-- Name: appointments_appointment_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE appointments_appointment_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE appointments_appointment_id_seq OWNER TO postgres;

--
-- TOC entry 2198 (class 0 OID 0)
-- Dependencies: 175
-- Name: appointments_appointment_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE appointments_appointment_id_seq OWNED BY appointments.appointment_id;


--
-- TOC entry 176 (class 1259 OID 24995)
-- Name: category; Type: TABLE; Schema: public; Owner: postgres; Tablespace: 
--

CREATE TABLE category (
    category_id bigint NOT NULL,
    name character varying
);


ALTER TABLE category OWNER TO postgres;

--
-- TOC entry 177 (class 1259 OID 25001)
-- Name: category_category_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE category_category_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE category_category_id_seq OWNER TO postgres;

--
-- TOC entry 2199 (class 0 OID 0)
-- Dependencies: 177
-- Name: category_category_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE category_category_id_seq OWNED BY category.category_id;


--
-- TOC entry 178 (class 1259 OID 25003)
-- Name: devices; Type: TABLE; Schema: public; Owner: postgres; Tablespace: 
--

CREATE TABLE devices (
    device_id bigint NOT NULL,
    name character varying,
    id_number character varying NOT NULL,
    user_id bigint,
    latest_sync timestamp without time zone
);


ALTER TABLE devices OWNER TO postgres;

--
-- TOC entry 179 (class 1259 OID 25009)
-- Name: devices_device_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE devices_device_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE devices_device_id_seq OWNER TO postgres;

--
-- TOC entry 2200 (class 0 OID 0)
-- Dependencies: 179
-- Name: devices_device_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE devices_device_id_seq OWNED BY devices.device_id;


--
-- TOC entry 180 (class 1259 OID 25011)
-- Name: flowchart; Type: TABLE; Schema: public; Owner: postgres; Tablespace: 
--

CREATE TABLE flowchart (
    flowchart_id bigint NOT NULL,
    first_id bigint,
    name character varying,
    end_id bigint,
    creator_id bigint,
    version character varying
);


ALTER TABLE flowchart OWNER TO postgres;

--
-- TOC entry 181 (class 1259 OID 25017)
-- Name: flowchart_flowchart_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE flowchart_flowchart_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE flowchart_flowchart_id_seq OWNER TO postgres;

--
-- TOC entry 2201 (class 0 OID 0)
-- Dependencies: 181
-- Name: flowchart_flowchart_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE flowchart_flowchart_id_seq OWNED BY flowchart.flowchart_id;


--
-- TOC entry 182 (class 1259 OID 25019)
-- Name: item; Type: TABLE; Schema: public; Owner: postgres; Tablespace: 
--

CREATE TABLE item (
    item_id bigint NOT NULL,
    flowchart_id bigint NOT NULL,
    label text,
    pos_top double precision,
    pos_left double precision,
    type character varying
);


ALTER TABLE item OWNER TO postgres;

--
-- TOC entry 183 (class 1259 OID 25025)
-- Name: item_item_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE item_item_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE item_item_id_seq OWNER TO postgres;

--
-- TOC entry 2202 (class 0 OID 0)
-- Dependencies: 183
-- Name: item_item_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE item_item_id_seq OWNED BY item.item_id;


--
-- TOC entry 184 (class 1259 OID 25027)
-- Name: location; Type: TABLE; Schema: public; Owner: postgres; Tablespace: 
--

CREATE TABLE location (
    location_id bigint NOT NULL,
    name character varying,
    address_id bigint,
    owner_id bigint,
    manager_id bigint,
    license character varying,
    agent_id bigint
);


ALTER TABLE location OWNER TO postgres;

--
-- TOC entry 185 (class 1259 OID 25033)
-- Name: location_category; Type: TABLE; Schema: public; Owner: postgres; Tablespace: 
--

CREATE TABLE location_category (
    location_id bigint NOT NULL,
    category_id bigint NOT NULL
);


ALTER TABLE location_category OWNER TO postgres;

--
-- TOC entry 186 (class 1259 OID 25036)
-- Name: location_location_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE location_location_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE location_location_id_seq OWNER TO postgres;

--
-- TOC entry 2203 (class 0 OID 0)
-- Dependencies: 186
-- Name: location_location_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE location_location_id_seq OWNED BY location.location_id;


--
-- TOC entry 187 (class 1259 OID 25038)
-- Name: option; Type: TABLE; Schema: public; Owner: postgres; Tablespace: 
--

CREATE TABLE option (
    option_id bigint NOT NULL,
    parent_id bigint,
    next_id bigint,
    label text
);


ALTER TABLE option OWNER TO postgres;

--
-- TOC entry 188 (class 1259 OID 25044)
-- Name: option_option_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE option_option_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE option_option_id_seq OWNER TO postgres;

--
-- TOC entry 2204 (class 0 OID 0)
-- Dependencies: 188
-- Name: option_option_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE option_option_id_seq OWNED BY option.option_id;


--
-- TOC entry 189 (class 1259 OID 25046)
-- Name: path; Type: TABLE; Schema: public; Owner: postgres; Tablespace: 
--

CREATE TABLE path (
    report_id bigint NOT NULL,
    option_id bigint NOT NULL,
    data text
);


ALTER TABLE path OWNER TO postgres;

--
-- TOC entry 190 (class 1259 OID 25052)
-- Name: person; Type: TABLE; Schema: public; Owner: postgres; Tablespace: 
--

CREATE TABLE person (
    person_id bigint NOT NULL,
    last_name1 character varying NOT NULL,
    first_name character varying NOT NULL,
    email character varying(254),
    spec_id bigint,
    last_name2 character varying,
    middle_initial character varying,
    phone_number text
);


ALTER TABLE person OWNER TO postgres;

--
-- TOC entry 191 (class 1259 OID 25058)
-- Name: person_person_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE person_person_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE person_person_id_seq OWNER TO postgres;

--
-- TOC entry 2205 (class 0 OID 0)
-- Dependencies: 191
-- Name: person_person_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE person_person_id_seq OWNED BY person.person_id;


--
-- TOC entry 192 (class 1259 OID 25060)
-- Name: report; Type: TABLE; Schema: public; Owner: postgres; Tablespace: 
--

CREATE TABLE report (
    report_id bigint NOT NULL,
    creator_id bigint,
    location_id bigint,
    subject_id bigint,
    flowchart_id bigint,
    note text,
    date_filed date
);


ALTER TABLE report OWNER TO postgres;

--
-- TOC entry 193 (class 1259 OID 25066)
-- Name: report_report_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE report_report_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE report_report_id_seq OWNER TO postgres;

--
-- TOC entry 2206 (class 0 OID 0)
-- Dependencies: 193
-- Name: report_report_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE report_report_id_seq OWNED BY report.report_id;


--
-- TOC entry 194 (class 1259 OID 25068)
-- Name: specialization; Type: TABLE; Schema: public; Owner: postgres; Tablespace: 
--

CREATE TABLE specialization (
    spec_id bigint NOT NULL,
    name character varying
);


ALTER TABLE specialization OWNER TO postgres;

--
-- TOC entry 195 (class 1259 OID 25074)
-- Name: specialization_spec_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE specialization_spec_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE specialization_spec_id_seq OWNER TO postgres;

--
-- TOC entry 2207 (class 0 OID 0)
-- Dependencies: 195
-- Name: specialization_spec_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE specialization_spec_id_seq OWNED BY specialization.spec_id;


--
-- TOC entry 196 (class 1259 OID 25076)
-- Name: users; Type: TABLE; Schema: public; Owner: postgres; Tablespace: 
--

CREATE TABLE users (
    user_id bigint NOT NULL,
    username character varying(32) NOT NULL,
    passhash text DEFAULT crypt(gen_salt('bf'::text), gen_salt('bf'::text)) NOT NULL,
    person_id bigint,
    salt text DEFAULT gen_salt('bf'::text) NOT NULL
);


ALTER TABLE users OWNER TO postgres;

--
-- TOC entry 2208 (class 0 OID 0)
-- Dependencies: 196
-- Name: COLUMN users.passhash; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN users.passhash IS 'crypt(''new password'', gen_salt(''bf''))';


--
-- TOC entry 197 (class 1259 OID 25084)
-- Name: user_user_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE user_user_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE user_user_id_seq OWNER TO postgres;

--
-- TOC entry 2209 (class 0 OID 0)
-- Dependencies: 197
-- Name: user_user_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE user_user_id_seq OWNED BY users.user_id;


--
-- TOC entry 198 (class 1259 OID 25086)
-- Name: view_users; Type: VIEW; Schema: public; Owner: postgres
--

CREATE VIEW view_users AS
 SELECT users.username,
    person.first_name,
    person.last_name1,
    person.last_name2,
    person.email
   FROM (users
     JOIN person ON ((users.person_id = person.person_id)));


ALTER TABLE view_users OWNER TO postgres;

--
-- TOC entry 2007 (class 2604 OID 25090)
-- Name: address_id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY address ALTER COLUMN address_id SET DEFAULT nextval('address_address_id_seq'::regclass);


--
-- TOC entry 2008 (class 2604 OID 25091)
-- Name: appointment_id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY appointments ALTER COLUMN appointment_id SET DEFAULT nextval('appointments_appointment_id_seq'::regclass);


--
-- TOC entry 2009 (class 2604 OID 25092)
-- Name: category_id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY category ALTER COLUMN category_id SET DEFAULT nextval('category_category_id_seq'::regclass);


--
-- TOC entry 2010 (class 2604 OID 25093)
-- Name: device_id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY devices ALTER COLUMN device_id SET DEFAULT nextval('devices_device_id_seq'::regclass);


--
-- TOC entry 2011 (class 2604 OID 25094)
-- Name: flowchart_id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY flowchart ALTER COLUMN flowchart_id SET DEFAULT nextval('flowchart_flowchart_id_seq'::regclass);


--
-- TOC entry 2012 (class 2604 OID 25095)
-- Name: item_id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY item ALTER COLUMN item_id SET DEFAULT nextval('item_item_id_seq'::regclass);


--
-- TOC entry 2013 (class 2604 OID 25096)
-- Name: location_id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY location ALTER COLUMN location_id SET DEFAULT nextval('location_location_id_seq'::regclass);


--
-- TOC entry 2014 (class 2604 OID 25097)
-- Name: option_id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY option ALTER COLUMN option_id SET DEFAULT nextval('option_option_id_seq'::regclass);


--
-- TOC entry 2015 (class 2604 OID 25098)
-- Name: person_id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY person ALTER COLUMN person_id SET DEFAULT nextval('person_person_id_seq'::regclass);


--
-- TOC entry 2016 (class 2604 OID 25099)
-- Name: report_id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY report ALTER COLUMN report_id SET DEFAULT nextval('report_report_id_seq'::regclass);


--
-- TOC entry 2017 (class 2604 OID 25100)
-- Name: spec_id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY specialization ALTER COLUMN spec_id SET DEFAULT nextval('specialization_spec_id_seq'::regclass);


--
-- TOC entry 2020 (class 2604 OID 25101)
-- Name: user_id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY users ALTER COLUMN user_id SET DEFAULT nextval('user_user_id_seq'::regclass);


--
-- TOC entry 2022 (class 2606 OID 25103)
-- Name: address_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres; Tablespace: 
--

ALTER TABLE ONLY address
    ADD CONSTRAINT address_pkey PRIMARY KEY (address_id);


--
-- TOC entry 2024 (class 2606 OID 25105)
-- Name: appointments_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres; Tablespace: 
--

ALTER TABLE ONLY appointments
    ADD CONSTRAINT appointments_pkey PRIMARY KEY (appointment_id);


--
-- TOC entry 2026 (class 2606 OID 25107)
-- Name: category_name_key; Type: CONSTRAINT; Schema: public; Owner: postgres; Tablespace: 
--

ALTER TABLE ONLY category
    ADD CONSTRAINT category_name_key UNIQUE (name);


--
-- TOC entry 2028 (class 2606 OID 25109)
-- Name: category_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres; Tablespace: 
--

ALTER TABLE ONLY category
    ADD CONSTRAINT category_pkey PRIMARY KEY (category_id);


--
-- TOC entry 2030 (class 2606 OID 25111)
-- Name: devices_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres; Tablespace: 
--

ALTER TABLE ONLY devices
    ADD CONSTRAINT devices_pkey PRIMARY KEY (device_id);


--
-- TOC entry 2032 (class 2606 OID 25113)
-- Name: flowchart_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres; Tablespace: 
--

ALTER TABLE ONLY flowchart
    ADD CONSTRAINT flowchart_pkey PRIMARY KEY (flowchart_id);


--
-- TOC entry 2034 (class 2606 OID 25115)
-- Name: item_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres; Tablespace: 
--

ALTER TABLE ONLY item
    ADD CONSTRAINT item_pkey PRIMARY KEY (item_id);


--
-- TOC entry 2038 (class 2606 OID 25117)
-- Name: location_category_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres; Tablespace: 
--

ALTER TABLE ONLY location_category
    ADD CONSTRAINT location_category_pkey PRIMARY KEY (location_id, category_id);


--
-- TOC entry 2036 (class 2606 OID 25119)
-- Name: location_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres; Tablespace: 
--

ALTER TABLE ONLY location
    ADD CONSTRAINT location_pkey PRIMARY KEY (location_id);


--
-- TOC entry 2040 (class 2606 OID 25121)
-- Name: option_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres; Tablespace: 
--

ALTER TABLE ONLY option
    ADD CONSTRAINT option_pkey PRIMARY KEY (option_id);


--
-- TOC entry 2042 (class 2606 OID 25123)
-- Name: path_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres; Tablespace: 
--

ALTER TABLE ONLY path
    ADD CONSTRAINT path_pkey PRIMARY KEY (report_id, option_id);


--
-- TOC entry 2044 (class 2606 OID 25125)
-- Name: person_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres; Tablespace: 
--

ALTER TABLE ONLY person
    ADD CONSTRAINT person_pkey PRIMARY KEY (person_id);


--
-- TOC entry 2046 (class 2606 OID 25127)
-- Name: report_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres; Tablespace: 
--

ALTER TABLE ONLY report
    ADD CONSTRAINT report_pkey PRIMARY KEY (report_id);


--
-- TOC entry 2048 (class 2606 OID 25129)
-- Name: specialization_name_key; Type: CONSTRAINT; Schema: public; Owner: postgres; Tablespace: 
--

ALTER TABLE ONLY specialization
    ADD CONSTRAINT specialization_name_key UNIQUE (name);


--
-- TOC entry 2050 (class 2606 OID 25131)
-- Name: specialization_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres; Tablespace: 
--

ALTER TABLE ONLY specialization
    ADD CONSTRAINT specialization_pkey PRIMARY KEY (spec_id);


--
-- TOC entry 2052 (class 2606 OID 25133)
-- Name: user_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres; Tablespace: 
--

ALTER TABLE ONLY users
    ADD CONSTRAINT user_pkey PRIMARY KEY (user_id);


--
-- TOC entry 2054 (class 2606 OID 25135)
-- Name: user_username_key; Type: CONSTRAINT; Schema: public; Owner: postgres; Tablespace: 
--

ALTER TABLE ONLY users
    ADD CONSTRAINT user_username_key UNIQUE (username);


--
-- TOC entry 2055 (class 2606 OID 25136)
-- Name: appointments_location_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY appointments
    ADD CONSTRAINT appointments_location_fkey FOREIGN KEY (location_id) REFERENCES location(location_id);


--
-- TOC entry 2056 (class 2606 OID 25141)
-- Name: appointments_report_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY appointments
    ADD CONSTRAINT appointments_report_fkey FOREIGN KEY (report_id) REFERENCES report(report_id);


--
-- TOC entry 2057 (class 2606 OID 25146)
-- Name: devices_users_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY devices
    ADD CONSTRAINT devices_users_fkey FOREIGN KEY (user_id) REFERENCES users(user_id);


--
-- TOC entry 2058 (class 2606 OID 25151)
-- Name: flowchart_creator_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY flowchart
    ADD CONSTRAINT flowchart_creator_id_fkey FOREIGN KEY (creator_id) REFERENCES users(user_id);


--
-- TOC entry 2059 (class 2606 OID 25156)
-- Name: flowchart_end_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY flowchart
    ADD CONSTRAINT flowchart_end_id_fkey FOREIGN KEY (end_id) REFERENCES item(item_id);


--
-- TOC entry 2060 (class 2606 OID 25161)
-- Name: flowchart_first_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY flowchart
    ADD CONSTRAINT flowchart_first_id_fkey FOREIGN KEY (first_id) REFERENCES item(item_id);


--
-- TOC entry 2061 (class 2606 OID 25166)
-- Name: item_flowchart_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY item
    ADD CONSTRAINT item_flowchart_id_fkey FOREIGN KEY (flowchart_id) REFERENCES flowchart(flowchart_id);


--
-- TOC entry 2062 (class 2606 OID 25171)
-- Name: location_address_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY location
    ADD CONSTRAINT location_address_id_fkey FOREIGN KEY (address_id) REFERENCES address(address_id);


--
-- TOC entry 2063 (class 2606 OID 25176)
-- Name: location_agent_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY location
    ADD CONSTRAINT location_agent_id_fkey FOREIGN KEY (agent_id) REFERENCES users(user_id);


--
-- TOC entry 2066 (class 2606 OID 25181)
-- Name: location_category_category_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY location_category
    ADD CONSTRAINT location_category_category_id_fkey FOREIGN KEY (category_id) REFERENCES category(category_id);


--
-- TOC entry 2067 (class 2606 OID 25186)
-- Name: location_category_location_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY location_category
    ADD CONSTRAINT location_category_location_id_fkey FOREIGN KEY (location_id) REFERENCES location(location_id);


--
-- TOC entry 2064 (class 2606 OID 25191)
-- Name: location_manager_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY location
    ADD CONSTRAINT location_manager_id_fkey FOREIGN KEY (manager_id) REFERENCES person(person_id);


--
-- TOC entry 2065 (class 2606 OID 25196)
-- Name: location_owner_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY location
    ADD CONSTRAINT location_owner_id_fkey FOREIGN KEY (owner_id) REFERENCES person(person_id);


--
-- TOC entry 2068 (class 2606 OID 25201)
-- Name: option_item_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY option
    ADD CONSTRAINT option_item_id_fkey FOREIGN KEY (parent_id) REFERENCES item(item_id);


--
-- TOC entry 2069 (class 2606 OID 25206)
-- Name: option_next_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY option
    ADD CONSTRAINT option_next_id_fkey FOREIGN KEY (next_id) REFERENCES item(item_id);


--
-- TOC entry 2070 (class 2606 OID 25211)
-- Name: path_option_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY path
    ADD CONSTRAINT path_option_id_fkey FOREIGN KEY (option_id) REFERENCES option(option_id);


--
-- TOC entry 2071 (class 2606 OID 25216)
-- Name: path_report_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY path
    ADD CONSTRAINT path_report_id_fkey FOREIGN KEY (report_id) REFERENCES report(report_id);


--
-- TOC entry 2072 (class 2606 OID 25221)
-- Name: person_spec_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY person
    ADD CONSTRAINT person_spec_id_fkey FOREIGN KEY (spec_id) REFERENCES specialization(spec_id);


--
-- TOC entry 2073 (class 2606 OID 25226)
-- Name: report_creator_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY report
    ADD CONSTRAINT report_creator_id_fkey FOREIGN KEY (creator_id) REFERENCES users(user_id);


--
-- TOC entry 2074 (class 2606 OID 25231)
-- Name: report_flowchart_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY report
    ADD CONSTRAINT report_flowchart_id_fkey FOREIGN KEY (flowchart_id) REFERENCES flowchart(flowchart_id);


--
-- TOC entry 2075 (class 2606 OID 25236)
-- Name: report_location_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY report
    ADD CONSTRAINT report_location_id_fkey FOREIGN KEY (location_id) REFERENCES location(location_id);


--
-- TOC entry 2076 (class 2606 OID 25241)
-- Name: report_subject_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY report
    ADD CONSTRAINT report_subject_id_fkey FOREIGN KEY (subject_id) REFERENCES person(person_id);


--
-- TOC entry 2077 (class 2606 OID 25246)
-- Name: user_person_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY users
    ADD CONSTRAINT user_person_fkey FOREIGN KEY (person_id) REFERENCES person(person_id);


--
-- TOC entry 2194 (class 0 OID 0)
-- Dependencies: 6
-- Name: public; Type: ACL; Schema: -; Owner: postgres
--

REVOKE ALL ON SCHEMA public FROM PUBLIC;
REVOKE ALL ON SCHEMA public FROM postgres;
GRANT ALL ON SCHEMA public TO postgres;
GRANT ALL ON SCHEMA public TO PUBLIC;


-- Completed on 2015-04-13 10:19:54

--
-- PostgreSQL database dump complete
--

